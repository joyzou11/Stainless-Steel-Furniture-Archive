(()=>{"use strict";var e={745:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserCountry=t.initCountryDropdownOptions=t.initCountryDropdown=void 0;var n=a(200);function l(){document.getElementById("raven_country_code").style.display="none";var e=document.getElementById("raven_country_select_container"),t=document.getElementById("raven_country_code"),a=t.options[t.selectedIndex].value.toString(),n=document.createElement("div");n.setAttribute("class","select-selected"),n.innerHTML=r(a),n.addEventListener("click",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.currentTarget.nextSibling.classList.toggle("select-hide"),e.currentTarget.classList.toggle("select-arrow-active")})),e.appendChild(n),o()}function o(){var e=document.getElementById("raven_country_select_container"),t=document.getElementById("raven_country_code"),a=document.createElement("div");a.setAttribute("class","select-items select-hide");for(var n,l=function(e){var l=t.options[e].value,o=document.createElement("div");o.innerHTML=r(l)+'&nbsp;<p style="margin: 0px;padding: 0px;line-height:32px;">'+t.options[e].text+"</p>",o.addEventListener("click",(function(a){a.preventDefault(),a.stopImmediatePropagation();var n=a.currentTarget.parentNode.previousSibling;for(e=0;e<t.length;e++)if(r(t.options[e].value)===a.currentTarget.innerHTML.substr(0,102)){t.selectedIndex=e,n.innerHTML=a.currentTarget.innerHTML.substr(0,102);for(var l=a.currentTarget.parentNode.getElementsByClassName("same-as-selected"),o=0;o<l.length;o++)l[o].removeAttribute("class");a.currentTarget.setAttribute("class","same-as-selected");break}n.click()})),a.appendChild(o),n=e},o=0;o<t.length;o++)l(o),o=n;e.appendChild(a)}t.initCountryDropdown=l,t.initCountryDropdownOptions=o,t.getUserCountry=function(){n.Http.get(n.API+"api/contacts/country",(function(e){for(var t=document.getElementById("raven_country_code"),a=0,n=0;n<t.options.length;n++)t.options[n].value===e.country&&(a=n);t.selectedIndex=a,l()}))};var r=function(e){return'<img style="height: 30px;" loading="lazy" src="https://scoutcr.herokuapp.com/assets/flags/png/'+e.toLowerCase()+'.png">'}},200:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Http=t.API=void 0,t.API="https://scout-raven.herokuapp.com/";var a=function(){function e(){}return e.get=function(e,t){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(a.responseText);e.success&&t(e)}},a.open("GET",e,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send()},e.post=function(e,t,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(n.responseText);e.success&&a(e)}},n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify(t))},e}();t.Http=a},697:(e,t,a)=>{var n=a(200),l=a(701),o=a(22),r=a(745),c={widget:void 0,widgetScript:void 0,template:void 0};function i(e){e&&(e.value="")}function d(e){e&&(e.checked=!0)}function s(){localStorage.clear(),C(!0),k(!0),h(!1),_(!1),S(!1),i(o.Selector().ravenCallbackPhoneNumber),i(o.Selector().ravenCallbackEmail),i(o.Selector().ravenCallbackName),i(o.Selector().ravenCallbackContext),d(o.Selector().radioWhatsapp),d(o.Selector().radioSMS),d(o.Selector().radioCall),"true"===o.isForEmbed()||(o.Selector().ravenCloseForm.addEventListener("click",m),o.Selector().ravenCallbackOverlay.addEventListener("click",m)),o.Selector().buttonCallback.addEventListener("click",(function(e){g(e,!1)})),o.Selector().ravenCallbackSubmit.addEventListener("click",v),l.trackOpen(o.getShopName()),c.widget.schedulingOptions&&c.widget.schedulingOptions.isOn?(o.Selector().radioCall&&o.Selector().radioCall.addEventListener("click",u),o.Selector().radioSMS&&o.Selector().radioSMS.addEventListener("click",u),o.Selector().radioWhatsapp&&o.Selector().radioWhatsapp.addEventListener("click",u),o.Selector().buttonScheduleCall&&(o.Selector().buttonScheduleCall.addEventListener("click",(function(e){g(e,!0)})),u())):o.Selector().buttonScheduleCall&&(o.Selector().buttonScheduleCall.style.display="none")}function u(){o.Selector().buttonScheduleCall&&(o.Selector().radioCall&&o.Selector().radioCall.checked?o.Selector().buttonScheduleCall.style.display="":o.Selector().buttonScheduleCall.style.display="none")}function m(e){e.preventDefault(),e.stopImmediatePropagation(),S(""===c.widgetScript.isPublished),C(!1),k(!1),h(!1),_(!1)}function v(e){e.preventDefault(),e.stopImmediatePropagation();var t=o.getValue("raven_callback_email");if(c.widget.secondPage.emailCapture.isOn&&o.Selector().ravenCallbackEmail){var a=!1;if(t&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)&&(a=!0),t||""+c.widgetScript.emailIsRequired!="true"||(a=!0),a)return o.Selector().ravenCallbackEmail.style.borderColor="#ed6347",void(o.Selector().ravenCallbackEmail.style.backgroundColor="#fbeae5")}var l=o.getValue("raven_callback_name");if(c.widget.secondPage.nameCapture.isOn&&o.Selector().ravenCallbackName&&!l&&""+c.widgetScript.nameIsRequired=="true")return o.Selector().ravenCallbackName.style.borderColor="#ed6347",void(o.Selector().ravenCallbackName.style.backgroundColor="#fbeae5");var r,i,d=o.getValue("raven_callback_context");if(c.widget.secondPage.contextCapture.isOn&&o.Selector().ravenCallbackContext&&!d&&""+c.widgetScript.contextIsRequired=="true")return o.Selector().ravenCallbackContext.style.borderColor="#ed6347",void(o.Selector().ravenCallbackContext.style.backgroundColor="#fbeae5");o.Selector().ravenSelectedDay&&"none"!==o.Selector().ravenSelectedDay.style.display&&(r=o.getValue("raven_selected_day")),o.Selector().ravenSelectedTime&&"none"!==o.Selector().ravenSelectedTime.style.display&&(i=o.getValue("raven_selected_time"));var s={contactId:localStorage.getItem("ravenContactId"),email:""===t?void 0:t,name:""===l?void 0:l,context:""===d?void 0:d};r&&i?(s={email:""===t?void 0:t,name:""===l?void 0:l,context:""===d?void 0:d,scheduleCallbackDay:r,scheduleCallbackTime:i,phoneNumber:localStorage.getItem("phoneNumber"),selectedCallback:localStorage.getItem("selectedCallback"),countryCode:localStorage.getItem("countryCode"),pageUrl:localStorage.getItem("pageUrl")},n.Http.post(""+c.widgetScript.submitUrl,s,(function(e){return p(e,!0)}))):n.Http.post(""+c.widgetScript.updateUrl,s,b)}function g(e,t){e.preventDefault(),e.stopImmediatePropagation();var a=o.getValue("raven_callback_phone_number"),r=o.getValue("raven_country_code");if(!a||NaN===parseInt(a))return o.Selector().ravenCallbackPhoneNumber.style.borderColor="#ed6347",void(o.Selector().ravenCallbackPhoneNumber.style.backgroundColor="#fbeae5");if("NO"===r){if(a.length<6)return o.Selector().ravenCallbackPhoneNumber.style.borderColor="#ed6347",void(o.Selector().ravenCallbackPhoneNumber.style.backgroundColor="#fbeae5")}else if(a.length<10)return o.Selector().ravenCallbackPhoneNumber.style.borderColor="#ed6347",void(o.Selector().ravenCallbackPhoneNumber.style.backgroundColor="#fbeae5");if(o.Selector().ravenSelectedDay&&(o.Selector().ravenSelectedDay.style.display="none",o.Selector().ravenSelectedDayLabel.style.display="none",o.Selector().ravenSelectedTime.style.display="none",o.Selector().ravenSelectedTimeLabel.style.display="none"),t){o.Selector().ravenSelectedDay.style.display="",o.Selector().ravenSelectedDayLabel.style.display="inline-block",o.Selector().ravenSelectedTime.style.display="",o.Selector().ravenSelectedTimeLabel.style.display="inline-block",l.checkMobile(),o.Selector().ravenSelectedDay.addEventListener("change",(function(){o.removeOptions("raven_selected_time"),o.addOptions("raven_selected_time",l.getTimeOptions(o.getValue("raven_selected_day"),c.widgetScript.dateWithTimes))}));var d=l.getDateOptions(c.widgetScript.dateWithTimes);o.removeOptions("raven_selected_day"),o.removeOptions("raven_selected_time"),o.addOptions("raven_selected_day",d),o.addOptions("raven_selected_time",l.getTimeOptions(d[0].value,c.widgetScript.dateWithTimes))}i(o.Selector().ravenCallbackEmail),i(o.Selector().ravenCallbackName),i(o.Selector().ravenCallbackContent),"true"!=""+c.widgetScript.skipSecondPage||t?(k(!1),h(!0),t||(c.widget.secondPage.nameCapture.isOn||(o.Selector().ravenLabelName&&(o.Selector().ravenLabelName.style.display="none"),o.Selector().ravenCallbackName&&(o.Selector().ravenCallbackName.style.display="none")),c.widget.secondPage.emailCapture.isOn||(o.Selector().ravenLabelEmail&&(o.Selector().ravenLabelEmail.style.display="none"),o.Selector().ravenCallbackEmail&&(o.Selector().ravenCallbackEmail.style.display="none")),c.widget.secondPage.contextCapture.isOn||(o.Selector().ravenLabelContext&&(o.Selector().ravenLabelContext.style.display="none"),o.Selector().ravenCallbackContext&&(o.Selector().ravenCallbackContext.style.display="none")))):(k(!1),h(!1),_(!0),S(!1));var s=o.getChecked("raven_call_action_sms"),u=o.getChecked("raven_call_action_whatsapp"),m="call";if(s?m="sms":u&&(m="whatsapp"),t)localStorage.setItem("phoneNumber",a),localStorage.setItem("selectedCallback",m),localStorage.setItem("countryCode",r),localStorage.setItem("pageUrl",window.location.href);else{var v={phoneNumber:a,selectedCallback:m,countryCode:r,pageUrl:window.location.href};n.Http.post(""+c.widgetScript.submitUrl,v,p)}}function p(e,t){e.success&&(localStorage.setItem("ravenContactId",e.contactId),t&&(k(!1),h(!1),_(!0),S(!1)))}function b(e){e.success&&(k(!1),h(!1),_(!0),S(!1))}function y(e){c.widget=e.widget,c.widgetScript=e.widgetScript,c.template=e.template,function(){window.checkNumber=l.checkNumber;var e=document.createElement("div");e.innerHTML=c.template,document.getElementsByTagName("body")[0].appendChild(e)}(),function(){var e,t,a=document.createElement("div"),n=document.createElement("button"),r=c.widget.selectedLocation;if(l.checkMobile()?(e=function(){o.Selector().ravenCallbackButtonFirstPage.style.position=o.Selector().ravenCallbackButtonSecondPage.style.position="fixed",o.Selector().ravenCallbackButtonFirstPage.style.width=o.Selector().ravenCallbackButtonSecondPage.style.width="100%",o.Selector().ravenCallbackButtonFirstPage.style.bottom=o.Selector().ravenCallbackButtonSecondPage.style.bottom="0"},t=function(){document.getElementById("raven-close-form").style.left="23px",document.getElementById("raven-close-form").style.top="-23px"},o.Selector().ravenCallbackWidgetContainer.style.maxWidth="unset",o.Selector().ravenCallbackWidgetContainer.style.minWidth="100%",o.Selector().ravenCallbackWidgetContainer.style.width="100%",o.Selector().ravenCallbackWidgetContainer.style.height="100%",o.Selector().ravenCallbackWidgetContainer.style.left="0",o.Selector().ravenCallbackWidgetContainer.style.right="0",o.Selector().ravenCallbackWidgetContainer.style.marginLeft="0",o.Selector().ravenCallbackWidgetContainer.style.marginRight="0",o.Selector().ravenCallbackWidgetContainer.style.borderRadius="0px",o.Selector().ravenCallbackWidgetContainer.style.border="none",o.Selector().ravenCallbackWidgetContainer.style.top="0",o.Selector().ravenCallbackWidgetContainer.style.marginTop="0",e(),t()):(a.style.left=""+c.widgetScript.left,a.style.right=""+c.widgetScript.right),a.id="raven_callback_button_wrapper",a.style.position="fixed",a.style.zIndex="2247483634",a.style.display=""+c.widgetScript.isPublished,!function(e){return"page"===e}(r)&&l.checkMobile())o.Selector().ravenCallbackIcon.style.display="",n.appendChild(o.Selector().ravenCallbackIcon),n.style.backgroundColor=""+c.widgetScript.backgroundColor,n.style.width="60px",n.style.height="60px",n.style.padding="15px",n.style.borderRadius="50px",n.style.border="0px","topL"===r||"topR"===r?a.style.top="0.5rem":a.style.bottom="0.5rem","topL"===r||"bottomL"===r?a.style.left="0.5rem":a.style.right="0.5rem";else{var i=document.createTextNode(""+c.widgetScript.buttonText);n.appendChild(i),a.style.top=""+c.widgetScript.top,a.style.bottom=""+c.widgetScript.bottom,a.style.minHeight="50px",a.style.minWidth="120px",a.style.textAlign="center",n.style.borderRadius=c.widgetScript.borderRadius+"px",n.style.border=""+c.widgetScript.border,n.style.background=""+c.widgetScript.backgroundColor,n.style.font=""+c.widgetScript.buttonFont,n.style.color=""+c.widgetScript.color,n.style.height="50px",n.style.lineHeight="30px",n.style.margin="0px",n.style.cursor="pointer"}n.onclick=s.bind(this),a.appendChild(n),document.getElementsByTagName("body")[0].appendChild(a);var d=o.Selector().scoutCallbackButton;if(d.length)for(var u=0;u<d.length;u++)d[u].removeEventListener("click",s.bind(this)),d[u].addEventListener("click",s.bind(this));for(var m=document.getElementsByClassName("rc-form-cm"),v=function(e){var t=m[e].getElementsByTagName("label")[0];m[e].addEventListener("click",(function(){t.click()}))},g=0;g<m.length;g++)v(g)}(),"true"===o.isForEmbed()&&s(),r.getUserCountry()}function S(e){o.Selector().ravenCallbackButonWrapper.style.display=e?"":"none"}function C(e){e?(o.Selector().ravenCallbackOverlay.style.display="",o.Selector().ravenCallbackWidgetContainer.style.display="",o.Selector().ravenCallbackContainer.style.display=""):(o.Selector().ravenCallbackOverlay.style.display="none",o.Selector().ravenCallbackWidgetContainer.style.display="none",o.Selector().ravenCallbackContainer.style.display="none")}function k(e){e?(o.Selector().ravenCallbackContent.style.display="",o.Selector().ravenCallbackButtonFirstPage&&(o.Selector().ravenCallbackButtonFirstPage.style.display="")):(o.Selector().ravenCallbackContent.style.display="none",o.Selector().ravenCallbackButtonFirstPage&&(o.Selector().ravenCallbackButtonFirstPage.style.display="none"))}function h(e){e?(o.Selector().ravenCallbackSecondPage.style.display="flex",o.Selector().ravenCallbackButtonSecondPage&&(o.Selector().ravenCallbackButtonSecondPage.style.display="")):(o.Selector().ravenCallbackSecondPage.style.display="none",o.Selector().ravenCallbackButtonSecondPage&&(o.Selector().ravenCallbackButtonSecondPage.style.display="none"))}function _(e){o.Selector().ravenCallbackConfirmPage.style.display=e?"":"none"}setTimeout((function(){var e=o.getShopName()||o.getShopNameFromUrl();n.Http.post(n.API+"api/widget/data",{shopname:e,timezone:l.getTimeZone()},y)}))},22:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addOptions=t.removeOptions=t.getShopNameFromUrl=t.isForEmbed=t.getShopName=t.getChecked=t.getValue=t.Selector=void 0,t.Selector=function(){return{ravenCallbackOverlay:document.getElementById("raven_callback_overlay"),ravenCallbackWidgetContainer:document.getElementById("raven-widget-container"),ravenCallbackContainer:document.getElementById("raven-callback-container"),ravenCallbackContent:document.getElementById("raven_callback_content"),ravenCallbackSecondPage:document.getElementById("raven_callback_second_page"),ravenCallbackConfirmPage:document.getElementById("raven_callback_message"),ravenCloseForm:document.getElementById("raven-close-form"),ravenCallbackButonWrapper:document.getElementById("raven_callback_button_wrapper"),ravenCallbackIcon:document.getElementById("raven_mobile_icon"),ravenCallbackButtonFirstPage:document.getElementById("raven_callback_button_first"),ravenCallbackButtonSecondPage:document.getElementById("raven_callback_button_second"),radioSMS:document.getElementById("raven_call_action_sms"),radioCall:document.getElementById("raven_call_action_call"),radioWhatsapp:document.getElementById("raven_call_action_whatsapp"),ravenCountryCode:document.getElementById("raven_country_code"),ravenCallbackPhoneNumber:document.getElementById("raven_callback_phone_number"),ravenCallbackEmail:document.getElementById("raven_callback_email"),ravenCallbackName:document.getElementById("raven_callback_name"),ravenCallbackContext:document.getElementById("raven_callback_context"),buttonScheduleCall:document.getElementById("raven_schedule_call_button"),buttonScheduleCallPadding:document.getElementById("raven_schedule_call_button_padding"),buttonCallback:document.getElementById("raven_callback_button"),ravenSelectedDay:document.getElementById("raven_selected_day"),ravenSelectedDayLabel:document.getElementById("raven_selected_day_label"),ravenSelectedTime:document.getElementById("raven_selected_time"),ravenSelectedTimeLabel:document.getElementById("raven_selected_time_label"),ravenCallbackTitle:document.getElementById("raven_callback_title"),ravenCallbackConfirmationTitle:document.getElementById("raven_callback_confirmation_title"),ravenCallbackConfirmationIcon:document.getElementById("raven_callback_confirmation_icon"),ravenCloseButton:document.getElementById("raven_close_button"),scoutCallbackButton:document.getElementsByName("scout_callback_button"),ravenCallbackSubmit:document.getElementById("raven_callback_submit"),ravenLabelName:document.getElementById("raven_lbl_name"),ravenLabelEmail:document.getElementById("raven_lbl_email"),ravenLabelContext:document.getElementById("raven_lbl_context")}},t.getValue=function(e){return document.getElementById(e)&&document.getElementById(e).value},t.getChecked=function(e){return document.getElementById(e)&&document.getElementById(e).checked},t.getShopName=function(){var e=window.Shopify;return e&&e.shop},t.isForEmbed=function(){return window.forEmbed},t.getShopNameFromUrl=function(){var e=window.location.href;return new URL(e).searchParams.get("shopname")},t.removeOptions=function(e){for(var t=document.getElementById(e),a=t.options.length-1;a>=0;a--)t.remove(a)},t.addOptions=function(e,t){for(var a=document.getElementById(e),n=0;n<t.length;n+=1){var l=document.createElement("option");l.value=t[n].value,l.text=t[n].title,a.add(l)}}},701:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeOptions=t.getDateOptions=t.checkNumber=t.trackOpen=t.checkMobile=t.getTimeZone=void 0;var n=a(200);t.getTimeZone=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},t.checkMobile=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},t.trackOpen=function(e){var t={shopName:e,type:"open"};n.Http.post(n.API+"api/analytics/track",t,(function(){}))},t.checkNumber=function(e){var t=window.event?e.keyCode:e.which;return 8===e.keyCode||46===e.keyCode||!(t<48||t>57)},t.getDateOptions=function(e){return e.map((function(e){return{title:e.dateStr,value:e.date}}))},t.getTimeOptions=function(e,t){return t.find((function(t){return t.date===e})).times}}},t={};!function a(n){if(t[n])return t[n].exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}(697)})();