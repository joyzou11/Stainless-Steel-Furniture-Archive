(function(){"use strict";const wn="rc_sn",xn="currency",Cn="rc_session_token",En=["shop-pay-wallet-button","shopify-amazon-pay-button>","shopify-apple-pay-button","shopify-google-pay-button","shopify-paypal-button","shopify-accelerated-checkout"];class kn extends Error{returnsError;constructor(e,n){super(e),this.returnsError={...n,error:e},window.postMessage({type:"returnsError",data:this.returnsError},window.location.origin)}}const Vt=t=>sessionStorage.getItem(t)||"",Wt=(t,e)=>{const r=new URLSearchParams(location.search).get(t)||Vt(t);if(r)return sessionStorage.setItem(t,r),e?.(()=>r),r},$n=()=>{let t="";try{const e=Vt("appProxy");t=e?JSON.parse(e).pathPrefix:""}catch{}return t};class Zt{interceptors;constructor(){this.interceptors=[]}addInterceptor(e){this.interceptors.push(e)}removeInterceptor(e){const n=this.interceptors.indexOf(e);n!==-1&&this.interceptors.splice(n,1)}}class In extends Zt{constructor(){super()}async intercept(e){const n=window.originalFetch(e);for(const r of this.interceptors)r(e,n);return n}}new In;class Dn extends Zt{constructor(){super()}intercept(e){this.interceptors.forEach(n=>{n(e)})}}new Dn;const Pn={SFCC:"sfcc",bigCommerce:"bigCommerce",shopify:"shopify"};function Tn(){return Pn["shopify"]}class Ht{get shopInfo(){const e=Wt(wn)||"",n=new URLSearchParams(window.atob(e)),r=new URL(n.get("referer")||""),o=$n();return sessionStorage.setItem(Cn,n.get("sessionToken")||""),{rc_navigate_from_path:r.pathname.replace(o,""),rc_origin:r.origin+o,appKey:n.get("appKey")||"",orgId:n.get("orgId")||"",language:n.get("language")||"en-US",intentionId:n.get("intensionId")||"",sessionToken:n.get("sessionToken")||"",redirectUrl:n.get("redirectUrl")||"",currency:this.currency,platform:Tn()}}get providerShopInfo(){return{currency:this.shopInfo.currency,language:this.shopInfo.language,redirectUrl:this.shopInfo.redirectUrl,rc_origin:this.shopInfo.rc_origin,rc_navigate_from_path:this.shopInfo.rc_navigate_from_path}}get currency(){return Wt(xn)||""}}const An="modulepreload",Rn=function(t){return"/"+t},Kt={},Gt=function(e,n,r){return e()};var U=(t=>(t.pageEnter="page_enter",t.pageLeave="page_leave",t.UpdateProduct="click:update_product",t.ClickCheckout="click:checkout",t.ClickBuynow="click:buynow",t.APIcalculateAmount="api:calculate_amount",t.APIintention="api:intention",t))(U||{});const On=10;class Nn{reporter;breadcrumbCollector;initStatus="idle";retryCount=0;basicExtraData={trace_id:"",org_id:"",store:"",page_type:"shopper:efa_on_store"};pendingQueue=[];constructor(e){this.basicExtraData.trace_id=e}async init(){if(!(this.initStatus==="initialized"||this.initStatus=="preparing"))try{const{BreadcrumbCollector:e}=await Gt(()=>Promise.resolve().then(()=>bo),void 0),{Reporter:n}=await Gt(()=>Promise.resolve().then(()=>Qs),void 0);this.reporter=new n({pageData:{appName:"returns",pageId:"EFA_ON_STORE"}}),this.breadcrumbCollector=new e({reporter:this.reporter,networkSources:["automizely"],hooks:{onCollectBreadcrumb:r=>r.extraData&&r.extraData.eventName?r:!1,onCollectNetwork:()=>!1}}),this.initStatus="initialized",this.tryReportPendingQueue()}catch{this.initStatus="failed"}}prepareClickData(e,n){const r={...this.basicExtraData,...e};return{type:"click",reportTime:this.getISODateWithTimeZone(),data:this.formatClickData(n),extraData:r}}prepareEnterData(e){const n={...this.basicExtraData,eventName:U.pageEnter,payload:e};return{type:"pageEnter",reportTime:this.getISODateWithTimeZone(),data:{},extraData:n}}preparePageLeave(e){const n={...this.basicExtraData,eventName:U.pageLeave,payload:e};return{type:"pageLeave",reportTime:this.getISODateWithTimeZone(),data:{},extraData:n}}prepareAPIData(e,n){const r={...this.basicExtraData,eventName:e,payload:n};return{type:"api",reportTime:this.getISODateWithTimeZone(),data:{},extraData:r}}tryReportPendingQueue(){this.initStatus==="initialized"&&this.pendingQueue.length>0&&(this.pendingQueue.forEach(e=>this.breadcrumbCollector.collect({...e,extraData:{...this.basicExtraData,eventName:e.extraData.eventName,...e.extraData.payload&&{payload:e.extraData.payload}}})),this.pendingQueue=[])}async reportPageEnterEvent(e){this.collect(this.prepareEnterData(e))}async reportPageLeaveEvent(e){this.collect(this.preparePageLeave(e))}async reportAPIEvent(e,n){this.collect(this.prepareAPIData(e,n))}async reportClickEvent(e,n){this.collect(this.prepareClickData(e,n))}async collect(e){this.initStatus==="idle"?this.pendingQueue.push(e):this.initStatus==="failed"?this.retryCount<=On&&(this.retryCount+=1,this.pendingQueue.push(e),await this.init()):this.initStatus==="preparing"?this.pendingQueue.push(e):this.initStatus==="initialized"&&this.breadcrumbCollector.collect(e)}updateExtraDataByDeviceMode(e){this.basicExtraData={...this.basicExtraData,device:e}}updateExtraDataByShopInfo(e){this.basicExtraData={...this.basicExtraData,platform:e?.platform,store:e?.appKey,org_id:e.orgId,from:e.rc_navigate_from_path}}formatClickData(e){return{path:this.formatPath(e),text:this.formatText(e)}}formatText(e){return e?.target?.innerText??""}formatPath(e){return(e?.nativeEvent?.path??[]).map(r=>`${r.tagName}${r.id?`#${r.id}`:""}${r.className?`.${r.className.split(" ").join(".")}`:""}`).filter(r=>r!=="undefined")}getISODateWithTimeZone(){const e=new Date,n=e.toISOString(),r=e.getTimezoneOffset();if(r===0)return n;const o=Math.round(Math.abs(r/60)),s=Math.round(Math.abs(r%60)),i=o<10?"0"+o:String(o),a=s<10?"0"+s:String(s),c=`${r<0?"+":"-"}${i}:${a}`;return`${n.replace("Z","")}${c}`}}function jn(t){let n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r;return typeof window<"u"&&window.atob?r=decodeURIComponent(window.atob(n).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join("")):r=Buffer.from(n,"base64").toString(),JSON.parse(r)}let wt;const Xt=()=>{const{shopInfo:t}=new Ht;if(t?.sessionToken)return jn(t.sessionToken)?.trace_id};function B(){const t=Xt();return!wt&&t&&(wt=new Nn(Xt())),wt}const k={};function Bn(t){k.context=t}const it={equals:(t,e)=>t===e};let q=null,Yt=oe;const F=1,at=2,Jt={owned:null,cleanups:null,context:null,owner:null},xt={};var C=null;let H=null,E=null,A=null,z=null,Ct=0;function Qt(t,e){const n=E,r=C,o=t.length===0,s=o?Jt:{owned:null,cleanups:null,context:null,owner:e||r},i=o?t:()=>t(()=>V(()=>ft(s)));C=s,E=null;try{return K(i,!0)}finally{E=n,C=r}}function v(t,e){e=e?Object.assign({},it,e):it;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),re(n,o));return[ne.bind(n),r]}function te(t,e,n){const r=ct(t,e,!0,F);J(r)}function Y(t,e,n){const r=ct(t,e,!1,F);J(r)}function R(t,e,n){Yt=Mn;const r=ct(t,e,!1,F);r.user=!0,z?z.push(r):J(r)}function L(t,e,n){n=n?Object.assign({},it,n):it;const r=ct(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,J(r),ne.bind(r)}function ot(t,e,n){let r,o,s;arguments.length===2&&typeof e=="object"||arguments.length===1?(r=!0,o=t,s=e||{}):(r=t,o=e,s=n||{});let i=null,a=xt,c=null,u=!1,l="initialValue"in s,d=typeof r=="function"&&L(r);const g=new Set,[_,w]=(s.storage||v)(s.initialValue),[D,j]=v(void 0),[S,x]=v(void 0,{equals:!1}),[f,h]=v(l?"ready":"unresolved");if(k.context){c=`${k.context.id}${k.context.count++}`;let y;s.ssrLoadFrom==="initial"?a=s.initialValue:k.load&&(y=k.load(c))&&(a=y[0])}function m(y,$,P,Z){return i===y&&(i=null,l=!0,(y===a||$===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(Z,{value:$})),a=xt,p($,P)),$}function p(y,$){K(()=>{$||w(()=>y),h($?"errored":"ready"),j($);for(const P of g.keys())P.decrement();g.clear()},!1)}function b(){const y=Un,$=_(),P=D();if(P&&!i)throw P;return E&&!E.user&&y&&te(()=>{S(),i&&(y.resolved||g.has(y)||(y.increment(),g.add(y)))}),$}function I(y=!0){if(y!==!1&&u)return;u=!1;const $=d?d():r;if($==null||$===!1){m(i,V(_));return}const P=a!==xt?a:V(()=>o($,{value:_(),refetching:y}));return typeof P!="object"||!(P&&"then"in P)?(m(i,P,void 0,$),P):(i=P,u=!0,queueMicrotask(()=>u=!1),K(()=>{h(l?"refreshing":"pending"),x()},!1),P.then(Z=>m(P,Z,void 0,$),Z=>m(P,void 0,ie(Z),$)))}return Object.defineProperties(b,{state:{get:()=>f()},error:{get:()=>D()},loading:{get(){const y=f();return y==="pending"||y==="refreshing"}},latest:{get(){if(!l)return b();const y=D();if(y&&!i)throw y;return _()}}}),d?te(()=>I(!1)):I(!1),[b,{refetch:I,mutate:w}]}function V(t){const e=E;E=null;try{return t()}finally{E=e}}function Et(t){R(()=>V(t))}function kt(t){return C===null||(C.cleanups===null?C.cleanups=[t]:C.cleanups.push(t)),t}function ee(t){q||(q=Symbol("error")),C===null||(C.context===null?C.context={[q]:[t]}:C.context[q]?C.context[q].push(t):C.context[q]=[t])}function Ln(){return C}let Un;function ne(){const t=H;if(this.sources&&(this.state||t))if(this.state===F||t)J(this);else{const e=A;A=null,K(()=>lt(this),!1),A=e}if(E){const e=this.observers?this.observers.length:0;E.sources?(E.sources.push(this),E.sourceSlots.push(e)):(E.sources=[this],E.sourceSlots=[e]),this.observers?(this.observers.push(E),this.observerSlots.push(E.sources.length-1)):(this.observers=[E],this.observerSlots=[E.sources.length-1])}return this.value}function re(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&K(()=>{for(let o=0;o<t.observers.length;o+=1){const s=t.observers[o],i=H&&H.running;i&&H.disposed.has(s),(i&&!s.tState||!i&&!s.state)&&(s.pure?A.push(s):z.push(s),s.observers&&se(s)),i||(s.state=F)}if(A.length>1e6)throw A=[],new Error},!1)),e}function J(t){if(!t.fn)return;ft(t);const e=C,n=E,r=Ct;E=C=t,Fn(t,t.value,r),E=n,C=e}function Fn(t,e,n){let r;try{r=t.fn(e)}catch(o){t.pure&&(t.state=F,t.owned&&t.owned.forEach(ft),t.owned=null),ae(o)}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?re(t,r):t.value=r,t.updatedAt=n)}function ct(t,e,n,r=F,o){const s={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:C,context:null,pure:n};return C===null||C!==Jt&&(C.owned?C.owned.push(s):C.owned=[s]),s}function ut(t){const e=H;if(t.state===0||e)return;if(t.state===at||e)return lt(t);if(t.suspense&&V(t.suspense.inFallback))return t.suspense.effects.push(t);const n=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Ct);)(t.state||e)&&n.push(t);for(let r=n.length-1;r>=0;r--)if(t=n[r],t.state===F||e)J(t);else if(t.state===at||e){const o=A;A=null,K(()=>lt(t,n[0]),!1),A=o}}function K(t,e){if(A)return t();let n=!1;e||(A=[]),z?n=!0:z=[],Ct++;try{const r=t();return zn(n),r}catch(r){A||(z=null),ae(r)}}function zn(t){if(A&&(oe(A),A=null),t)return;const e=z;z=null,e.length&&K(()=>Yt(e),!1)}function oe(t){for(let e=0;e<t.length;e++)ut(t[e])}function Mn(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:ut(r)}for(k.context&&Bn(),e=0;e<n;e++)ut(t[e])}function lt(t,e){const n=H;t.state=0;for(let r=0;r<t.sources.length;r+=1){const o=t.sources[r];o.sources&&(o.state===F||n?o!==e&&ut(o):(o.state===at||n)&&lt(o,e))}}function se(t){const e=H;for(let n=0;n<t.observers.length;n+=1){const r=t.observers[n];(!r.state||e)&&(r.state=at,r.pure?A.push(r):z.push(r),r.observers&&se(r))}}function ft(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(t.owned){for(e=0;e<t.owned.length;e++)ft(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function ie(t){return t instanceof Error||typeof t=="string"?t:new Error("Unknown error")}function ae(t){t=ie(t);const e=q&&ce(C,q);if(!e)throw t;for(const n of e)n(t)}function ce(t,e){return t?t.context&&t.context[e]!==void 0?t.context[e]:ce(t.owner,e):void 0}function qn(t){return{subscribe(e){if(!(e instanceof Object)||e==null)throw new TypeError("Expected the observer to be an object.");const n=typeof e=="function"?e:e.next&&e.next.bind(e);if(!n)return{unsubscribe(){}};const r=Qt(o=>(R(()=>{const s=t();V(()=>n(s))}),o));return Ln()&&kt(r),{unsubscribe(){r()}}},[Symbol.observable||"@@observable"](){return this}}}function O(t,e){return V(()=>t(e||{}))}let dt;function Vn(t){let e,n;k.context&&k.load&&(n=k.load(k.context.id+k.context.count))&&(e=n[0]);const[r,o]=v(e,void 0);return dt||(dt=new Set),dt.add(o),kt(()=>dt.delete(o)),L(()=>{let s;if(s=r()){const i=t.fallback,a=typeof i=="function"&&i.length?V(()=>i(s,()=>o())):i;return ee(o),a}return ee(o),t.children},void 0,void 0)}function Wn(t,e,n){let r=n.length,o=e.length,s=r,i=0,a=0,c=e[o-1].nextSibling,u=null;for(;i<o||a<s;){if(e[i]===n[a]){i++,a++;continue}for(;e[o-1]===n[s-1];)o--,s--;if(o===i){const l=s<r?a?n[a-1].nextSibling:n[s-a]:c;for(;a<s;)t.insertBefore(n[a++],l)}else if(s===a)for(;i<o;)(!u||!u.has(e[i]))&&e[i].remove(),i++;else if(e[i]===n[s-1]&&n[a]===e[o-1]){const l=e[--o].nextSibling;t.insertBefore(n[a++],e[i++].nextSibling),t.insertBefore(n[--s],l),e[o]=n[s]}else{if(!u){u=new Map;let d=a;for(;d<s;)u.set(n[d],d++)}const l=u.get(e[i]);if(l!=null)if(a<l&&l<s){let d=i,g=1,_;for(;++d<o&&d<s&&!((_=u.get(e[d]))==null||_!==l+g);)g++;if(g>l-a){const w=e[i];for(;a<l;)t.insertBefore(n[a++],w)}else t.replaceChild(n[a++],e[i++])}else i++;else e[i++].remove()}}}const ue="_$DX_DELEGATE";function W(t,e,n){const r=document.createElement("template");r.innerHTML=t;let o=r.content.firstChild;return n&&(o=o.firstChild),o}function le(t,e=window.document){const n=e[ue]||(e[ue]=new Set);for(let r=0,o=t.length;r<o;r++){const s=t[r];n.has(s)||(n.add(s),e.addEventListener(s,Hn))}}function $t(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}function Zn(t,e){e==null?t.removeAttribute("class"):t.className=e}function It(t,e,n,r){if(r)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const o=n[0];t.addEventListener(e,n[0]=s=>o.call(t,n[1],s))}else t.addEventListener(e,n)}function M(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return pt(t,e,r,n);Y(o=>pt(t,e(),o,n),r)}function Hn(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),k.registry&&!k.done&&(k.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>{for(;r&&r.nodeType!==8&&r.nodeValue!=="pl-"+t;){let o=r.nextSibling;r.remove(),r=o}r&&r.remove()}));n;){const r=n[e];if(r&&!n.disabled){const o=n[`${e}Data`];if(o!==void 0?r.call(n,o,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function pt(t,e,n,r,o){for(k.context&&!n&&(n=[...t.childNodes]);typeof n=="function";)n=n();if(e===n)return n;const s=typeof e,i=r!==void 0;if(t=i&&n[0]&&n[0].parentNode||t,s==="string"||s==="number"){if(k.context)return n;if(s==="number"&&(e=e.toString()),i){let a=n[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),n=Q(t,n,r,a)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||s==="boolean"){if(k.context)return n;n=Q(t,n,r)}else{if(s==="function")return Y(()=>{let a=e();for(;typeof a=="function";)a=a();n=pt(t,a,n,r)}),()=>n;if(Array.isArray(e)){const a=[],c=n&&Array.isArray(n);if(Dt(a,e,n,o))return Y(()=>n=pt(t,a,n,r,!0)),()=>n;if(k.context){if(!a.length)return n;for(let u=0;u<a.length;u++)if(a[u].parentNode)return n=a}if(a.length===0){if(n=Q(t,n,r),i)return n}else c?n.length===0?fe(t,a,r):Wn(t,n,a):(n&&Q(t),fe(t,a));n=a}else if(e instanceof Node){if(k.context&&e.parentNode)return n=i?[e]:e;if(Array.isArray(n)){if(i)return n=Q(t,n,r,e);Q(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function Dt(t,e,n,r){let o=!1;for(let s=0,i=e.length;s<i;s++){let a=e[s],c=n&&n[s];if(a instanceof Node)t.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))o=Dt(t,a,c)||o;else if(typeof a=="function")if(r){for(;typeof a=="function";)a=a();o=Dt(t,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||o}else t.push(a),o=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?t.push(c):t.push(document.createTextNode(u))}}return o}function fe(t,e,n=null){for(let r=0,o=e.length;r<o;r++)t.insertBefore(e[r],n)}function Q(t,e,n,r){if(n===void 0)return t.textContent="";const o=r||document.createTextNode("");if(e.length){let s=!1;for(let i=e.length-1;i>=0;i--){const a=e[i];if(o!==a){const c=a.parentNode===t;!s&&!i?c?t.replaceChild(o,a):t.insertBefore(o,n):c&&a.remove()}else s=!0}}else t.insertBefore(o,n);return[o]}function Kn(t){return Object.keys(t).reduce((n,r)=>{const o=t[r];return n[r]=Object.assign({},o),he(o.value)&&!Qn(o.value)&&!Array.isArray(o.value)&&(n[r].value=Object.assign({},o.value)),Array.isArray(o.value)&&(n[r].value=o.value.slice(0)),n},{})}function Gn(t){return t?Object.keys(t).reduce((n,r)=>{const o=t[r];return n[r]=he(o)&&"value"in o?o:{value:o},n[r].attribute||(n[r].attribute=Jn(r)),n[r].parse="parse"in n[r]?n[r].parse:typeof n[r].value!="string",n},{}):{}}function Xn(t){return Object.keys(t).reduce((n,r)=>(n[r]=t[r].value,n),{})}function Yn(t,e){const n=Kn(e);return Object.keys(e).forEach(o=>{const s=n[o],i=t.getAttribute(s.attribute),a=t[o];i&&(s.value=s.parse?de(i):i),a!=null&&(s.value=Array.isArray(a)?a.slice(0):a),s.reflect&&pe(t,s.attribute,s.value),Object.defineProperty(t,o,{get(){return s.value},set(c){const u=s.value;s.value=c,s.reflect&&pe(this,s.attribute,s.value);for(let l=0,d=this.__propertyChangedCallbacks.length;l<d;l++)this.__propertyChangedCallbacks[l](o,c,u)},enumerable:!0,configurable:!0})}),n}function de(t){if(t)try{return JSON.parse(t)}catch{return t}}function pe(t,e,n){if(n==null||n===!1)return t.removeAttribute(e);let r=JSON.stringify(n);t.__updating[e]=!0,r==="true"&&(r=""),t.setAttribute(e,r),Promise.resolve().then(()=>delete t.__updating[e])}function Jn(t){return t.replace(/\.?([A-Z]+)/g,(e,n)=>"-"+n.toLowerCase()).replace("_","-").replace(/^-/,"")}function he(t){return t!=null&&(typeof t=="object"||typeof t=="function")}function Qn(t){return Object.prototype.toString.call(t)==="[object Function]"}function tr(t){return typeof t=="function"&&t.toString().indexOf("class")===0}let Pt;function er(t,e){const n=Object.keys(e);return class extends t{static get observedAttributes(){return n.map(o=>e[o].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=Yn(this,e);const o=Xn(this.props),s=this.Component,i=Pt;try{Pt=this,this.__initialized=!0,tr(s)?new s(o,{element:this}):s(o,{element:this})}finally{Pt=i}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let o=null;for(;o=this.__releaseCallbacks.pop();)o(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(o,s,i){if(this.__initialized&&!this.__updating[o]&&(o=this.lookupProp(o),o in e)){if(i==null&&!this[o])return;this[o]=e[o].parse?de(i):i}}lookupProp(o){if(e)return n.find(s=>o===s||o===e[s].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(o){this.__releaseCallbacks.push(o)}addPropertyChangedCallback(o){this.__propertyChangedCallbacks.push(o)}}}function nr(t,e={},n={}){const{BaseElement:r=HTMLElement,extension:o}=n;return s=>{if(!t)throw new Error("tag is required to register a Component");let i=customElements.get(t);return i?(i.prototype.Component=s,i):(i=er(r,Gn(e)),i.prototype.Component=s,i.prototype.registeredTag=t,customElements.define(t,i,o),i)}}function rr(t){const e=Object.keys(t),n={};for(let r=0;r<e.length;r++){const[o,s]=v(t[e[r]]);Object.defineProperty(n,e[r],{get:o,set(i){s(()=>i)}})}return n}function or(t){if(t.assignedSlot&&t.assignedSlot._$owner)return t.assignedSlot._$owner;let e=t.parentNode;for(;e&&!e._$owner&&!(e.assignedSlot&&e.assignedSlot._$owner);)e=e.parentNode;return e&&e.assignedSlot?e.assignedSlot._$owner:t._$owner}function sr(t){return(e,n)=>{const{element:r}=n;return Qt(o=>{const s=rr(e);r.addPropertyChangedCallback((a,c)=>s[a]=c),r.addReleaseCallback(()=>{r.renderRoot.textContent="",o()});const i=t(s,n);return M(r.renderRoot,i)},or(r))}}function ir(t,e,n){return arguments.length===2&&(n=e,e={}),nr(t,e)(sr(n))}const ht="rc_sn",ar="hostname",ge="rc_session_token",me="rc_banner_fold",Tt=['button[name="checkout"]','input[name="checkout"]','a[href="/checkout"]',".rebuy-cart__checkout-button",'button[id="mu-checkout-button"]',".mu-checkout-btn",".button-checkout",".rebuy-button",'input[value="Checkout"]',".cart-checkout__button",".btn-checkout",".checkout-buttons",".cart-button",'button[class="publicHover"]',".Cart__Checkout",".cart__checkout","shopify-accelerated-checkout"],At=["button.shopify-payment-button__button","input.shopify-payment-button__button","div.shopify-payment-button__button","just-pay-button",".shopify-payment-button__more-options",".shopify-payment-button__button","button[id='mu-checkout-button']","div[data-testid='PayPalInContext-button']"],cr={"exchangeOnStore.banner.creditExchange":"You need to pay ${RemainingCredit} for the exchange.","exchangeOnStore.banner.creditUse":"You have ${RemainingCredit} credit to use.","exchangeOnStore.banner.goBack":"Go back"},Rt=["#upCart"],ur="/cancel.svg",lr="/thumbnail.svg",fr="/warning.svg",be=t=>sessionStorage.getItem(t)||"",Ot=(t,e)=>{const r=new URLSearchParams(location.search).get(t)||be(t);if(r)return sessionStorage.setItem(t,r),e?.(()=>r),r},gt=()=>{let t="";try{t=new URLSearchParams(window.atob(Ot(ht)||"")).get("pathPrefix")||""}catch{}return t},Nt=t=>(new URL(Object.assign({"../images/cancel.svg":ur,"../images/thumbnail.svg":lr,"../images/warning.svg":fr})[`../images/${t}`],self.location),`https://widgets.automizely.com/returns/${t}`),mt=t=>{const e=new URL(t),n=gt(),r=Ot(ar);return!n&&r&&e.searchParams.set("hostname",r),e.toString()},dr=(t,e)=>{const n=/\${(.*?)}/g;return t?.replace?.(n,(o,s)=>e.hasOwnProperty(s)?e[s]:o)},ye=()=>self!==top,jt="https://api.automizely.com/rc/v4/shopper",ve=40300,bt=(t,e)=>{const n=be(ge);return fetch(jt+t,{...e,headers:{"returns-authorization":`Bearer ${n}`,"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>{if(r.meta.code===ve)throw new Error(`${r.meta.code}: ${r.meta.message}`);return r}).catch(r=>{const o=r instanceof Error?r.message:"Something went wrong";throw new kn(r,{baseUrl:jt,input:t,requertUrl:jt+t,method:"GET",message:o,returnsAPIException:!0})})},pr=async({intensionId:t})=>t?await bt(`/return-intentions/${t}`):null,hr=async({intensionId:t},e,n)=>{if(!(!t||!n))return await bt(`/return-intentions/${t}`,{method:"PUT",body:JSON.stringify(Object.assign(n,{exchange_items:e}))})},_e=async()=>await bt("/setting/checkout-button-class"),gr=async(t,e,n)=>await bt("/exchange-calculations",{method:"POST",body:JSON.stringify({app:{platform:"shopify",key:t.appKey},organization:{id:t.orgId},items:e?.map(r=>({quantity:r.return_quantity,external_item_id:r.item_id})),exchange:{items:n}})}),mr=async({orgId:t,language:e})=>fetch(`https://api.automizely.com/meerkat/v2/public/projects/returns-center-returns-page/production/business/${t}/translations/${e}/data.json`,{method:"GET"}).then(n=>n.json()),br=async({orgId:t})=>fetch(`https://api.returnscenter.com/shopper/v1/shops?organization_id=${t}`,{method:"GET"}).then(e=>e.json()),yr=["6c6dcb3a55cc44078772dab27b3646e0"],vr=()=>{const[t,e]=v(""),n=()=>{Ot(ht,e)},r=L(()=>Boolean(t())),[o,s]=v({redirect_url:"",rc_navigate_from_url:"",rc_origin:"",appKey:"",orgId:"",intensionId:"",sessionToken:"",language:"en-US"});return R(()=>{if(r()){const i=new URLSearchParams(window.atob(t())),a=new URL(i.get("referer")||""),c=new URL(i.get("redirectUrl")||""),u=gt();s(()=>({rc_navigate_from_url:a.toString(),rc_origin:a.origin+u,redirect_url:c.toString(),appKey:i.get("appKey")||"",orgId:i.get("orgId")||"",language:i.get("language")||"en-US",intensionId:i.get("intensionId")||"",sessionToken:i.get("sessionToken")||""}))}}),{storageParams:n,isFromEFA:r,shopInfo:o,urlParams:t}},_r=({openShopperUrl:t,shopInfo:e,validCurrency:n,setErrorMsg:r})=>{const[o]=ot(_e),{updateIntension:s}=Se({shopInfo:e}),i=new URL(e().redirect_url),a=gt();a&&a.length>0&&!i.pathname.includes(a)&&(i.pathname=a+i.pathname);const c=i.toString(),{checkoutBtnSelector:u,buyNowBtnSelector:l,shadowCheckoutBtnSelector:d}=wr(),g=()=>{const w=()=>{let S;try{S=document.querySelectorAll(d())}catch{S=document.querySelectorAll(Rt.join())}let x=[];S?.forEach(f=>{const h=f?.shadowRoot?.querySelectorAll(u());h&&(x=[...x,...h])}),x?.forEach(f=>{f?.addEventListener?.("click",h=>{h.target&&f&&f.contains(h.target)&&(h.stopPropagation(),h.preventDefault(),h.stopImmediatePropagation(),B().reportClickEvent({eventName:U.ClickCheckout}),n().then(()=>{t(c)}).catch(()=>{}))})})},D=()=>{let S;try{S=document.querySelectorAll(u())}catch{S=document.querySelectorAll(Tt.join())}document.addEventListener("click",function(x){S?.forEach(f=>{x.target&&f.contains(x.target)&&(x.stopPropagation(),x.preventDefault(),x.stopImmediatePropagation(),B().reportClickEvent({eventName:U.ClickCheckout}),n().then(()=>{t(c)}).catch(()=>{}))})},!0)},j=()=>{let S;try{S=document.querySelectorAll(l())}catch{S=document.querySelectorAll(At.join())}document.addEventListener("click",function(x){S?.forEach(f=>{x.target&&f.contains(x.target)&&(x.stopPropagation(),x.preventDefault(),x.stopImmediatePropagation(),n().then(()=>{const h=new URLSearchParams(location.search).get("variant"),m=document.querySelector('[name="quantity"]')?.value??1,p=location.pathname;B().reportClickEvent({eventName:U.ClickBuynow}),fetch(`${p}.js`).then(b=>b.json()).then(b=>{s([{external_product_id:String(b.id),external_variant_id:String(h||b.variants[0].id),quantity:Number(m)}]),t(c)}).catch(()=>{r(()=>"Please make an exchange on the product details page")})}).catch(()=>{}))})},!0)};w(),D(),j()},_=()=>{En?.forEach(w=>{try{document.querySelector(w)?.remove()}catch{}})};return R(()=>{g(),_();const w=document.body,D={attributes:!0,childList:!0,subtree:!0},j=()=>{g(),_()},S=new MutationObserver(j);w&&S.observe(w,D),kt(()=>{S.disconnect()})}),{buttonClasses:o}},Se=({shopInfo:t})=>{const[e,n]=v(!1),r=()=>{fetch("/cart?sections=cart-icon-bubble").then(f=>f.json()).then(f=>{const h=document.querySelector("#cart-icon-bubble");h&&(h.innerHTML=f["cart-icon-bubble"])})},o=()=>{l().then(f=>{D(f),x(f)})},s=f=>{const h=f?.exchange_items?.reduce((m,p)=>(m[p.external_variant_id]=String(p.quantity),m),{});fetch("/cart/update",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({updates:h,sections:"cart-icon-bubble"})}).then(()=>{r(),o()}).catch(()=>{})},[i]=ot(t,pr);R(()=>{const f=i()?.data;f&&s(f)});const a=()=>{const f=window,h=window.fetch;f.fetch=function(){const m=h.apply(this,arguments);return m.then(p=>{p.url.includes("cart/")&&(n(()=>!0),p.clone().json().then(()=>{o()}))}),m}},c=f=>{const h=["/cart/","/cart/add","/cart/change.js","/cart/add.js"];yr.includes(t().orgId)||h.push("/cart");const m=/\/cart\.js\?_=\d{13}/,p=f.split("?")[0];return!!h?.some(b=>(f===b||p.includes(b))&&!m.test(f))},u=()=>{window.XMLHttpRequest.prototype.originalOpen=window.XMLHttpRequest.prototype.open,window.XMLHttpRequest.prototype.open=function(f,h,m,p,b){this.addEventListener("readystatechange",function(){if(this.readyState===4&&this.status===200){if(!c(h))return;o()}}),this.originalOpen(f,h,m,p,b)}},l=()=>new Promise((f,h)=>{fetch(`/cart.js?rc=${Date.now()}`).then(m=>m.json()).then(m=>{const p=m.items.reduce((b,I)=>{const y=I.product_id.toString(),$=I.variant_id.toString(),P=b.some(Z=>Z.external_product_id===y&&Z.external_variant_id===$);return b.concat(P?[]:{external_product_id:y,external_variant_id:$,quantity:I.quantity})},[]);f(p)}).catch(m=>{console.log("error: "+m),h()})}),[d,g]=v(0),[_,w]=v(""),D=f=>{gr(t(),i()?.data?.items??[],f).then(h=>{B().reportAPIEvent(U.APIcalculateAmount,{status:"success"});const m=h.data.exchange.credit_remain;g(()=>Number(m.amount)),w(()=>m.currency),n(()=>!1)}).catch(()=>{B().reportAPIEvent(U.APIcalculateAmount,{status:"fail"})})},j=qn(_),S=()=>new Promise(f=>{j.subscribe(h=>{h&&f("")})}),x=f=>{hr(t(),f,i()?.data).then(()=>{B().reportAPIEvent(U.APIintention,{status:"success"})}).catch(h=>{B().reportAPIEvent(U.APIintention,{status:"fail",error:h})})};return{listenCartEvent:a,listenCartEvenForXMLHttpRequest:u,creditNum:d,creditCurrency:_,requestCartData:l,updateCartToRemainAndIntension:o,updateIntension:x,getCreditCurrency:S,isFetchingRemainCredit:e}},Sr=t=>(window?.Shopify?.currency?.active??"")===t;function we(t){const[e]=ot(t,mr,{storage:v});return{data:e,t:(r,o)=>dr(e()?.translation?.[r]??cr[r],o??{})}}function xe(t){const[e,n]=v(),[r]=ot(t,br);return R(()=>{n({background:r()?.data?.exchange_for_anything_in_store_banner_background,font:r()?.data?.exchange_for_anything_in_store_banner_font})}),{config:e}}function wr(){const[t,e]=v(Tt.join()),[n,r]=v(At.join()),[o,s]=v(Rt.join()),[i]=ot(_e);return R(()=>{const c=(i()?.data?.checkout_button_class_names??[]).reduce((g,_)=>{if(_.match("\\[buyNow\\]")){const[,w]=_.split("[buyNow]");g.buyNowBtn.push(w)}else if(_.match("\\[shadow\\]")){const[,w]=_.split("[shadow]");g.shadows.push(w)}else g.checkoutBtn.push(_);return g},{buyNowBtn:[],checkoutBtn:[],shadows:[]}),u=[...Tt,...c.checkoutBtn].join(),l=[...At,...c.buyNowBtn].join(),d=[...Rt,...c.shadows].join();r(l),e(u),s(d)}),{checkoutBtnSelector:t,buyNowBtnSelector:n,shadowCheckoutBtnSelector:o}}const xr=`.toastWrapper{text-align:center}.toast{margin:16px auto;padding:16px;display:inline-flex;background:#D82C0D;border-radius:46px;color:#fff;font-size:14px;text-align:unset}.toast_info{background:#000}.icon{margin-right:16px}
`,Cr=W("<style></style>"),Er=W('<div class="toastWrapper"><div><img class="icon" alt="warning"><span></span></div></div>');let G;(function(t){t.error="error",t.info="info"})(G||(G={}));const Ce=({errorMsg:t,type:e})=>{if(!t())return null;const n=e?.()??G.error;return[(()=>{const r=Cr.cloneNode(!0);return M(r,xr),r})(),(()=>{const r=Er.cloneNode(!0),o=r.firstChild,s=o.firstChild,i=s.nextSibling;return M(i,t),Y(a=>{const c=`toast ${n===G.info?"toast_info":""}`,u=Nt("warning.svg");return c!==a._v$&&Zn(o,a._v$=c),u!==a._v$2&&$t(s,"src",a._v$2=u),a},{_v$:void 0,_v$2:void 0}),r})()]},Bt=({type:t,errorMsg:e,duration:n=2e3})=>{const[r,o]=v(""),[s,i]=v(O(Ce,{errorMsg:r,type:t}));return R(()=>{o(()=>e())}),R(()=>{r()&&(i(O(Ce,{errorMsg:r,type:t})),setTimeout(()=>{i(()=>null),o(()=>"")},n))}),s},kr=W('<div class="thumbnail"><img width="15" height="32" class="icon" alt="thumbnail"></div>');function Ee({onClick:t,config:e}){return(()=>{const n=kr.cloneNode(!0),r=n.firstChild;return It(n,"click",t,!0),Y(o=>{const s=e?.()?.background??"",i=Nt("thumbnail.svg");return s!==o._v$&&n.style.setProperty("background-color",o._v$=s),i!==o._v$2&&$t(r,"src",o._v$2=i),o},{_v$:void 0,_v$2:void 0}),n})()}le(["click"]);const $r=W('<div class="banner"><div><strong>  </strong><span class="back_btn"></span></div><img class="icon" alt="close"></div>'),Ir="Lato",ke=[];function Dr(t){if(t&&!ke.includes(t)){const e=`<link rel='stylesheet' href="https://fonts.googleapis.com/css2?family=${t}&display=swap" />`;document.head.insertAdjacentHTML("beforeend",e),ke.push(t)}}function Lt({credit:t,goback:e,config:n,backBtnClick:r,cancelClick:o,isPreview:s}){return R(()=>{Dr(n?.()?.font||Ir)}),(()=>{const i=$r.cloneNode(!0),a=i.firstChild,c=a.firstChild,u=c.firstChild,l=c.nextSibling,d=a.nextSibling;return M(c,t,u),It(l,"click",s?void 0:r,!0),M(l,()=>typeof e=="string"?e:e()),It(d,"click",s?void 0:o,!0),Y(g=>{const _=n?.()?.background??"",w=n?.()?.font??"",D=Nt("cancel.svg");return _!==g._v$&&i.style.setProperty("background-color",g._v$=_),w!==g._v$2&&i.style.setProperty("font-family",g._v$2=w),D!==g._v$3&&$t(d,"src",g._v$3=D),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),i})()}le(["click"]);const Pr=({shopInfo:t,urlParams:e})=>{const[n,r]=v("--"),[o,s]=v("Go back");Et(()=>{document.body.classList.add("aftership-returns-actived"),u(),l()});const{creditNum:i,creditCurrency:a,getCreditCurrency:c,listenCartEvent:u,listenCartEvenForXMLHttpRequest:l,requestCartData:d,isFetchingRemainCredit:g}=Se({shopInfo:t}),{t:_}=we(t),{config:w}=xe(t);R(()=>{i()<0?r(()=>_("exchangeOnStore.banner.creditExchange",{RemainingCredit:` ${a()} ${g()?"--":Math.abs(i()).toFixed(2)} `})):r(()=>_("exchangeOnStore.banner.creditUse",{RemainingCredit:` ${a()} ${g()?"--":i().toFixed(2)||"--"} `})),s(()=>_("exchangeOnStore.banner.goBack"))});const D=b=>{const I=new URL(b);I.searchParams.set(ht,e()),I.searchParams.set("lang",t().language);const y=mt(I.toString());d().then(()=>{location.href=y})},[j,S]=v(G.error),[x,f]=v("",{equals:!1});_r({openShopperUrl:D,shopInfo:t,validCurrency:()=>new Promise(async(b,I)=>{if(a()||(S(G.info),f(()=>"We are processing your checkout···"),await c()),!Sr(a())){S(G.error),f(()=>`Switch back to ${a()} before the checkout`),I("");return}b("")}),setErrorMsg:f});const[m,p]=v(sessionStorage.getItem(me)==="true");return R(()=>{sessionStorage.setItem(me,m().toString())}),[O(Bt,{errorMsg:x,type:j}),L((()=>{const b=L(()=>!!m());return()=>b()?O(Ee,{config:w,onClick:()=>{p(()=>!1)}}):O(Lt,{credit:n,config:w,goback:o,backBtnClick:()=>{D(t().rc_navigate_from_url)},cancelClick:()=>{p(()=>!0)}})})())]},Tr=({shopInfo:t,urlParams:e})=>{const n=mt(`${t().rc_origin}?${ht}=${e()}`),[r,o]=v("--"),[s,i]=v("Go back"),{t:a}=we(t),[c,u]=v(!1),{config:l}=xe(t);return R(()=>{o(()=>a("exchangeOnStore.banner.creditUse",{RemainingCredit:" -- "})),i(()=>a("exchangeOnStore.banner.goBack"))}),L((()=>{const d=L(()=>!!c());return()=>d()?O(Ee,{config:l,onClick:()=>{u(()=>!1)}}):O(Lt,{config:l,credit:r,goback:s,backBtnClick:()=>{location.href=n},cancelClick:()=>{u(()=>!0)}})})())},$e=`.wrapper{z-index:4;bottom:0;left:0;right:0;position:fixed}.thumbnail{position:fixed;left:32px;bottom:32px;width:72px;height:72px;border-radius:100%;background:rgba(0,0,0,.9);padding:20px 28px;box-sizing:border-box}.banner{display:flex;justify-content:space-between;align-items:center;padding:26px 40px;background:rgba(0,0,0,.9);color:#fff}.back_btn{color:#fff;text-decoration:underline;cursor:pointer}@media screen and (max-width: 500px){.banner{padding:12px 16px}.back_btn{padding:10px 5.5px;min-width:64px}}.text{font-size:20px;font-weight:500}.icon{cursor:pointer}
`,Ar=W("<style></style>"),Rr=W('<div class="wrapper"></div>');function Ie(t){return typeof t=="string"?JSON.parse(t?.replace("undefined","")):void 0}function Or(){const[t,e]=v(),[n,r]=v("");return Et(()=>{const o=sessionStorage.getItem("EFA_ON_STORE_BANNER_CONFIG");if(o){const s=Ie(o);s&&s?.is_efa_on_store_banner_preview===!0&&(r(()=>s?.text??""),e(()=>({background:s?.background??"",font:s?.font??""})))}window.addEventListener("message",s=>{const i=Ie(s.data);i&&i?.is_efa_on_store_banner_preview===!0&&(r(()=>i?.text??""),e(()=>({background:i?.background??"",font:i?.font??""})))})}),[(()=>{const o=Ar.cloneNode(!0);return M(o,$e),o})(),(()=>{const o=Rr.cloneNode(!0);return M(o,O(Lt,{isPreview:!0,credit:n,goback:"Go back",config:t})),o})()]}const Nr=W("<style></style>"),jr=W('<div class="wrapper"></div>'),Br=()=>{const[t,e]=v("");if(ye()&&!{}.VITE_PREVIEW)return;const n=()=>{window.addEventListener("message",l=>{if(l.origin!==window.location.origin)return;const{type:d,data:g}=l.data;d==="returnsError"&&g?.returnsAPIException&&(e("Your session expired. Please refresh and try again"),setTimeout(()=>{location.href=mt(a().rc_origin)},2e3))})};Et(()=>{c(),n()});const[r,o]=v(""),s=vr(),{isFromEFA:i,shopInfo:a,storageParams:c}=s;R(()=>{sessionStorage.setItem(ge,a().sessionToken)});const u=L(()=>i()&&a().sessionToken);return R(()=>{u()&&window.asReturnsEvents?.()}),[(()=>{const l=Nr.cloneNode(!0);return M(l,$e),l})(),(()=>{const l=jr.cloneNode(!0);return M(l,O(Vn,{fallback:(d,g)=>d.toString().includes(ve.toString())?(o("Your session expired. Please refresh and try again"),setTimeout(()=>{location.href=mt(a().rc_origin)},2e3),[O(Bt,{errorMsg:r}),O(Tr,s)]):null,get children(){return[L(()=>t&&O(Bt,{errorMsg:t})),L(()=>L(()=>!!u())()?O(Pr,s):null)]}})),l})()]};ir("credit-banner",{}.VITE_PREVIEW?Or:Br);const Lr=()=>{const t=document.createElement("credit-banner");document.body.appendChild(t),t.setAttribute("style","z-index: 2147483647; position: fixed; display: unset;")};(async()=>{const t=gt();ye()&&!{}.VITE_PREVIEW||t&&location.href.includes(t)||!{}.VITE_PREVIEW&&window.self!==window.top||document.getElementsByTagName("credit-banner").length===0&&(B().updateExtraDataByShopInfo(new Ht().shopInfo),B().init(),B().reportPageEnterEvent({origin:location.origin}),Lr())})(),window.addEventListener("beforeunload",()=>{B().reportPageLeaveEvent({origin:location.origin})});var yt=(t=>(t.errors="errors",t.breadcrumbs="breadcrumbs",t.performances="performances",t))(yt||{});const De=()=>({reportURL:"https://www.automizely-analytics.com"}),Pe=3*1e3,Te=100*300,Ae=10*1e3,Re=30*1e3,Oe=`${De().reportURL}/perf-reports`,Ne=`${De().reportURL}/perf-report-settings`,Ut={reportBreadcrumbs:!1,reportErrors:!1,reportPerformances:!1,reportWebVitals:!1,samplingRatio:0,maxSamples:0},X=t=>{const e=t.toISOString(),n=t.getTimezoneOffset();if(n===0)return e;const r=Math.round(Math.abs(n/60)),o=Math.round(Math.abs(n%60)),s=r<10?"0"+r:String(r),i=o<10?"0"+o:String(o),a=`${n<0?"+":"-"}${s}:${i}`;return`${e.replace("Z","")}${a}`};var Ur=typeof global=="object"&&global&&global.Object===Object&&global;const Fr=Ur;var zr=typeof self=="object"&&self&&self.Object===Object&&self,Mr=Fr||zr||Function("return this")();const je=Mr;var qr=je.Symbol;const tt=qr;var Be=Object.prototype,Vr=Be.hasOwnProperty,Wr=Be.toString,st=tt?tt.toStringTag:void 0;function Zr(t){var e=Vr.call(t,st),n=t[st];try{t[st]=void 0;var r=!0}catch{}var o=Wr.call(t);return r&&(e?t[st]=n:delete t[st]),o}var Hr=Object.prototype,Kr=Hr.toString;function Gr(t){return Kr.call(t)}var Xr="[object Null]",Yr="[object Undefined]",Le=tt?tt.toStringTag:void 0;function Jr(t){return t==null?t===void 0?Yr:Xr:Le&&Le in Object(t)?Zr(t):Gr(t)}function Qr(t){return t!=null&&typeof t=="object"}var to="[object Symbol]";function Ue(t){return typeof t=="symbol"||Qr(t)&&Jr(t)==to}var eo=Object.defineProperty,no=(t,e,n)=>e in t?eo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,et=(t,e,n)=>(no(t,typeof e!="symbol"?e+"":e,n),n),nt=(t=>(t.Click="click",t.Scroll="scroll",t.Network="network",t.Input="input",t))(nt||{});const Fe=1e3,ze=1e3;var ro=/\s/;function oo(t){for(var e=t.length;e--&&ro.test(t.charAt(e)););return e}var so=/^\s+/;function io(t){return t&&t.slice(0,oo(t)+1).replace(so,"")}function Ft(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Me=0/0,ao=/^[-+]0x[0-9a-f]+$/i,co=/^0b[01]+$/i,uo=/^0o[0-7]+$/i,lo=parseInt;function qe(t){if(typeof t=="number")return t;if(Ue(t))return Me;if(Ft(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ft(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=io(t);var n=co.test(t);return n||uo.test(t)?lo(t.slice(2),n?2:8):ao.test(t)?Me:+t}var fo=function(){return je.Date.now()};const zt=fo;var po="Expected a function",ho=Math.max,go=Math.min;function Ve(t,e,n){var r,o,s,i,a,c,u=0,l=!1,d=!1,g=!0;if(typeof t!="function")throw new TypeError(po);e=qe(e)||0,Ft(n)&&(l=!!n.leading,d="maxWait"in n,s=d?ho(qe(n.maxWait)||0,e):s,g="trailing"in n?!!n.trailing:g);function _(p){var b=r,I=o;return r=o=void 0,u=p,i=t.apply(I,b),i}function w(p){return u=p,a=setTimeout(S,e),l?_(p):i}function D(p){var b=p-c,I=p-u,y=e-b;return d?go(y,s-I):y}function j(p){var b=p-c,I=p-u;return c===void 0||b>=e||b<0||d&&I>=s}function S(){var p=zt();if(j(p))return x(p);a=setTimeout(S,D(p))}function x(p){return a=void 0,g&&r?_(p):(r=o=void 0,i)}function f(){a!==void 0&&clearTimeout(a),u=0,r=c=o=a=void 0}function h(){return a===void 0?i:x(zt())}function m(){var p=zt(),b=j(p);if(r=arguments,o=this,c=p,b){if(a===void 0)return w(c);if(d)return clearTimeout(a),a=setTimeout(S,e),_(c)}return a===void 0&&(a=setTimeout(S,e)),i}return m.cancel=f,m.flush=h,m}const vt={data:[],push(t){this.data.push(t)}};(()=>{const t=window.fetch,e=async(n,r)=>{var o,s;const i=new Date;let a;try{a=await t(n,r)}catch{a={status:0}}const c=new Date,u=X(c),{status:l}=a;return vt.push({type:nt.Network,data:{status:l,url:(o=n?.url)!=null?o:n.toString(),startTime:X(i),endTime:u,duration:c.getTime()-i.getTime(),method:(s=r?.method)!=null?s:"GET"},reportTime:u,extraData:{}}),a.status,a};window.fetch=e})();const We=t=>t.map(e=>`${e.tagName}${e.id?`#${e.id}`:""}${e.className?`.${e.className.split(" ").join(".")}`:""}`).filter(e=>e!=="undefined");class mo{constructor({hooks:e,reporter:n,networkSources:r,excludeNetworkSources:o,scrollDebounce:s=Fe,inputDebounce:i=ze}){et(this,"reporter"),et(this,"hooks"),et(this,"scrollDebounce"),et(this,"inputDebounce"),et(this,"networkSources"),et(this,"excludeNetworkSources"),this.networkSources=r,this.excludeNetworkSources=[...o??[],"https://www.automizely-analytics.io"],this.scrollDebounce=s,this.inputDebounce=i,this.reporter=n,this.hooks=e,this.collectNetwork(),this.collectClick(),this.collectScroll(),this.collectInput()}collectNetwork(){const e=n=>{var r;if(!(this.excludeNetworkSources.some(o=>n.data.url.match(o))||!this.networkSources.some(o=>n.data.url.match(o)))){if((r=this.hooks)!=null&&r.onCollectNetwork){const o=this.hooks.onCollectNetwork(n);if(!o)return;n=o}this.collect(n)}};vt.push=e,vt.data.forEach(e),vt.data=[]}collectInput(){const e=Ve(n=>{this.collect({type:nt.Input,data:n,extraData:{},reportTime:X(new Date)})},this.inputDebounce);document.addEventListener("input",n=>{var r,o;e({path:n.path?We(n.path):[],value:(o=(r=n.target)==null?void 0:r.value)!=null?o:""})})}collectClick(){document.addEventListener("click",e=>{var n;this.collect({type:nt.Click,data:{path:e.path?We(e.path):[],text:(n=e.target)==null?void 0:n.innerText},extraData:{},reportTime:X(new Date)})})}collectScroll(){const e={deltaX:0,deltaY:0,deltaZ:0},n=Ve(r=>{this.collect({type:nt.Scroll,data:r,extraData:{},reportTime:X(new Date)}),e.deltaX=0,e.deltaY=0,e.deltaZ=0},this.scrollDebounce);document.addEventListener("touchstart",r=>{var o,s;const{pageX:i,pageY:a}=(s=(o=r.changedTouches)==null?void 0:o[0])!=null?s:{};i===void 0||a===void 0||(e.deltaX=i,e.deltaY=a)}),document.addEventListener("touchend",r=>{var o,s;const{pageX:i,pageY:a}=(s=(o=r.changedTouches)==null?void 0:o[0])!=null?s:{};if(i===void 0||a===void 0)return;const c=e.deltaX-i,u=e.deltaY-a;c===0&&u===0||n({deltaX:c,deltaY:u,deltaZ:0})}),document.addEventListener("wheel",r=>{n({deltaX:r.deltaX,deltaY:r.deltaY,deltaZ:r.deltaZ})})}collect(e){var n,r,o;if(e.reportTime||(e.reportTime=X(new Date)),(n=this.hooks)!=null&&n.onCollectBreadcrumb){const s=(o=(r=this.hooks)==null?void 0:r.onCollectBreadcrumb)==null?void 0:o.call(r,e);if(!s)return;e=s}this.reporter.push(yt.breadcrumbs,e)}}const bo=Object.freeze(Object.defineProperty({__proto__:null,BreadcrumbCollector:mo,BreadcrumbType:nt,InputDebounceDefaultValue:ze,ScrollDebounceDefaultValue:Fe},Symbol.toStringTag,{value:"Module"}));var yo=Object.defineProperty,vo=(t,e,n)=>e in t?yo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e,n)=>(vo(t,typeof e!="symbol"?e+"":e,n),n);function _o(t,e){for(var n=-1,r=t==null?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var So=Array.isArray;const wo=So;var xo=1/0,Ze=tt?tt.prototype:void 0,He=Ze?Ze.toString:void 0;function Ke(t){if(typeof t=="string")return t;if(wo(t))return _o(t,Ke)+"";if(Ue(t))return He?He.call(t):"";var e=t+"";return e=="0"&&1/t==-xo?"-0":e}function _t(t){return t==null?"":Ke(t)}function Co(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(o);++r<o;)s[r]=t[r+e];return s}function Eo(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Co(t,e,n)}var ko="\\ud800-\\udfff",$o="\\u0300-\\u036f",Io="\\ufe20-\\ufe2f",Do="\\u20d0-\\u20ff",Po=$o+Io+Do,To="\\ufe0e\\ufe0f",Ao="\\u200d",Ro=RegExp("["+Ao+ko+Po+To+"]");function Ge(t){return Ro.test(t)}function Oo(t){return t.split("")}var Xe="\\ud800-\\udfff",No="\\u0300-\\u036f",jo="\\ufe20-\\ufe2f",Bo="\\u20d0-\\u20ff",Lo=No+jo+Bo,Uo="\\ufe0e\\ufe0f",Fo="["+Xe+"]",Mt="["+Lo+"]",qt="\\ud83c[\\udffb-\\udfff]",zo="(?:"+Mt+"|"+qt+")",Ye="[^"+Xe+"]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",Qe="[\\ud800-\\udbff][\\udc00-\\udfff]",Mo="\\u200d",tn=zo+"?",en="["+Uo+"]?",qo="(?:"+Mo+"(?:"+[Ye,Je,Qe].join("|")+")"+en+tn+")*",Vo=en+tn+qo,Wo="(?:"+[Ye+Mt+"?",Mt,Je,Qe,Fo].join("|")+")",Zo=RegExp(qt+"(?="+qt+")|"+Wo+Vo,"g");function Ho(t){return t.match(Zo)||[]}function Ko(t){return Ge(t)?Ho(t):Oo(t)}function Go(t){return function(e){e=_t(e);var n=Ge(e)?Ko(e):void 0,r=n?n[0]:e.charAt(0),o=n?Eo(n,1).join(""):e.slice(1);return r[t]()+o}}var Xo=Go("toUpperCase");const Yo=Xo;function Jo(t){return Yo(_t(t).toLowerCase())}function Qo(t,e,n,r){var o=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++o]);++o<s;)n=e(n,t[o],o,t);return n}function ts(t){return function(e){return t?.[e]}}var es={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ns=ts(es);const rs=ns;var os=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ss="\\u0300-\\u036f",is="\\ufe20-\\ufe2f",as="\\u20d0-\\u20ff",cs=ss+is+as,us="["+cs+"]",ls=RegExp(us,"g");function fs(t){return t=_t(t),t&&t.replace(os,rs).replace(ls,"")}var ds=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function ps(t){return t.match(ds)||[]}var hs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function gs(t){return hs.test(t)}var nn="\\ud800-\\udfff",ms="\\u0300-\\u036f",bs="\\ufe20-\\ufe2f",ys="\\u20d0-\\u20ff",vs=ms+bs+ys,rn="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",_s="\\xac\\xb1\\xd7\\xf7",Ss="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ws="\\u2000-\\u206f",xs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sn="A-Z\\xc0-\\xd6\\xd8-\\xde",Cs="\\ufe0e\\ufe0f",an=_s+Ss+ws+xs,cn="['’]",un="["+an+"]",Es="["+vs+"]",ln="\\d+",ks="["+rn+"]",fn="["+on+"]",dn="[^"+nn+an+ln+rn+on+sn+"]",$s="\\ud83c[\\udffb-\\udfff]",Is="(?:"+Es+"|"+$s+")",Ds="[^"+nn+"]",pn="(?:\\ud83c[\\udde6-\\uddff]){2}",hn="[\\ud800-\\udbff][\\udc00-\\udfff]",rt="["+sn+"]",Ps="\\u200d",gn="(?:"+fn+"|"+dn+")",Ts="(?:"+rt+"|"+dn+")",mn="(?:"+cn+"(?:d|ll|m|re|s|t|ve))?",bn="(?:"+cn+"(?:D|LL|M|RE|S|T|VE))?",yn=Is+"?",vn="["+Cs+"]?",As="(?:"+Ps+"(?:"+[Ds,pn,hn].join("|")+")"+vn+yn+")*",Rs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Os="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ns=vn+yn+As,js="(?:"+[ks,pn,hn].join("|")+")"+Ns,Bs=RegExp([rt+"?"+fn+"+"+mn+"(?="+[un,rt,"$"].join("|")+")",Ts+"+"+bn+"(?="+[un,rt+gn,"$"].join("|")+")",rt+"?"+gn+"+"+mn,rt+"+"+bn,Os,Rs,ln,js].join("|"),"g");function Ls(t){return t.match(Bs)||[]}function Us(t,e,n){return t=_t(t),e=n?void 0:e,e===void 0?gs(t)?Ls(t):ps(t):t.match(e)||[]}var Fs="['’]",zs=RegExp(Fs,"g");function Ms(t){return function(e){return Qo(Us(fs(e).replace(zs,"")),t,"")}}var qs=Ms(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});const Vs=qs,Ws=async t=>{try{const e=await fetch(`${Ne}?app-name=${t}`).then(n=>n.json());if(!(e!=null&&e.data))throw"Failed to get online setting";return{reportBreadcrumbs:e.data.report_breadcrumbs,reportErrors:e.data.report_errors,reportPerformances:e.data.report_performances,reportWebVitals:e.data.report_web_vitals,samplingRatio:e.data.sampling_ratio,maxSamples:e.data.max_samples}}catch(e){return console.error(e),Ut}};let St;const Zs=new Uint8Array(16);function Hs(){if(!St&&(St=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!St))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return St(Zs)}const T=[];for(let t=0;t<256;++t)T.push((t+256).toString(16).slice(1));function Ks(t,e=0){return(T[t[e+0]]+T[t[e+1]]+T[t[e+2]]+T[t[e+3]]+"-"+T[t[e+4]]+T[t[e+5]]+"-"+T[t[e+6]]+T[t[e+7]]+"-"+T[t[e+8]]+T[t[e+9]]+"-"+T[t[e+10]]+T[t[e+11]]+T[t[e+12]]+T[t[e+13]]+T[t[e+14]]+T[t[e+15]]).toLowerCase()}const Gs=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_n={randomUUID:Gs};function Xs(t,e,n){if(_n.randomUUID&&!e&&!t)return _n.randomUUID();t=t||{};const r=t.random||(t.rng||Hs)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=r[o];return e}return Ks(r)}const Ys=t=>{var e,n;return{url:window.location.href,enterTime:X(new Date),shopifyStore:(n=(e=window.Shopify)==null?void 0:e.shop)!=null?n:null,sessionId:Xs(),...t}},Sn=t=>Object.fromEntries(Object.entries(t).map(([e,n])=>[Vs(e),n]));class Js{constructor({reportInterval:e=Pe,reportSize:n=Te,checkReportInterval:r=Ae,reportURL:o=Oe,pageData:s,hooks:i}){N(this,"queue",[]),N(this,"queueSize",0),N(this,"reportInterval"),N(this,"reportURL"),N(this,"pageData"),N(this,"reportSize"),N(this,"checkReportInterval"),N(this,"onlineSetting",Ut),N(this,"hooks"),N(this,"isInSample",!1),N(this,"hasSetInSample",!1),N(this,"sentEventCount",0),this.checkReportInterval=Math.max(r,Re),this.reportInterval=e,this.reportSize=n,this.reportURL=o,this.pageData=Ys(s),this.reportInIntervals(),this.hooks=i??{},this.checkReport(),this.reportInIntervals()}checkReport(){Ws(this.pageData.appName).then(e=>{this.onlineSetting=e,!this.hasSetInSample&&(this.hasSetInSample=!0,this.isInSample=Math.random()<=this.onlineSetting.samplingRatio)}),setTimeout(()=>{!this.isInSample||this.checkReport()},this.checkReportInterval)}reportInIntervals(){setTimeout(()=>{this.report(),this.reportInIntervals()},this.reportInterval)}push(e,n){var r,o,s;const i=((s=(o=(r=this.hooks).onPush)==null?void 0:o.call(r,e,n))!=null?s:[{type:e,data:n}]).map(a=>{const c=JSON.stringify(Sn(a.data));return this.queueSize+=c.length,{...a,data:c}});this.queue.push(...i),this.queueSize>this.reportSize&&this.report()}getDataToReport(){const e=Object.fromEntries(Object.keys(yt).map(n=>[n,[]]));return this.queue.forEach(({type:n,data:r})=>{!this.onlineSetting[`report${Jo(n)}`]||e[n].push(r)}),e}checkAndClearQueueSize(){for(;this.queueSize>this.reportSize;){const e=this.queue.shift();if(!e)break;this.queueSize-=e.data.length}}sendReport(e){return e.breadcrumbs||(e.breadcrumbs=[]),e.errors||(e.errors=[]),e.performances||(e.performances=[]),navigator.sendBeacon(this.reportURL,`{"page":${JSON.stringify(Sn(this.pageData))},${Object.entries(e).map(([n,r])=>`"${n}":[${r.join(",")}]`).join(",")}}`)}report(){var e,n;if(!this.isInSample||this.queue.length===0)return;const r=this.getDataToReport(),o=Object.values(r).flat();if(o.length===0)return this.checkAndClearQueueSize();this.sentEventCount+=o.length,!(this.sentEventCount>=this.onlineSetting.maxSamples)&&((n=(e=this.hooks).onReport)==null||n.call(e,r),this.queue=[],this.queueSize=0,this.sendReport(r))}}const Qs=Object.freeze(Object.defineProperty({__proto__:null,DefaultCheckReportInterval:Ae,DefaultOnlineSettings:Ut,DefaultReportInterval:Pe,DefaultReportSize:Te,DefaultReportURL:Oe,MaxCheckReportInterval:Re,ReportType:yt,Reporter:Js,getSettingURL:Ne},Symbol.toStringTag,{value:"Module"}))})();
